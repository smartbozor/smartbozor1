document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[data-occupied]").forEach(c=>{c.addEventListener("click",e=>{fetch("",{method:"PUT",headers:{"Content-Type":"text/plain; charset=utf-8",...csrf_header()},body:c.dataset.occupied.toString()}).then(e=>e.json()).then(t=>{t.success?c.closest("tr").querySelectorAll(".badge-occupied").forEach(e=>{e.classList.toggle("bg-success",t.is_occupied),e.classList.toggle("bg-danger",!t.is_occupied),e.innerText=t.title}):alert(t.message)}).catch(e=>{alert(e)})})})});